{
  "name": "circuit-board",
  "type": "registry:ui",
  "dependencies": ["framer-motion"],
  "registryDependencies": [],
  "description": "An interactive circuit board layout component with animated electricity paths that pulse between connected nodes.",
  "files": [
    {
      "path": "components/ui/circuit-board.tsx",
      "content": "\"use client\"\n\nimport * as React from \"react\"\nimport { motion } from \"framer-motion\"\nimport { cn } from \"@/lib/utils\"\n\ninterface CircuitNode {\n  id: string\n  x: number\n  y: number\n  label?: string\n  icon?: React.ReactNode\n  size?: \"sm\" | \"md\" | \"lg\"\n}\n\ninterface CircuitConnection {\n  from: string\n  to: string\n  animated?: boolean\n  bidirectional?: boolean\n}\n\ninterface CircuitBoardProps extends React.HTMLAttributes<HTMLDivElement> {\n  nodes: CircuitNode[]\n  connections: CircuitConnection[]\n  width?: number\n  height?: number\n  gridSize?: number\n  showGrid?: boolean\n  pulseSpeed?: number\n  traceWidth?: number\n}\n\nfunction CircuitBoard({\n  nodes,\n  connections,\n  width = 600,\n  height = 400,\n  gridSize = 20,\n  showGrid = true,\n  pulseSpeed = 2,\n  traceWidth = 2,\n  className,\n  ...props\n}: CircuitBoardProps) {\n  const gridColor = \"rgba(163, 163, 163, 0.08)\"\n  const traceColor = \"rgba(163, 163, 163, 0.3)\"\n  const pulseColor = \"rgba(163, 163, 163, 0.8)\"\n  const nodeColor = \"rgba(163, 163, 163, 0.5)\"\n  const pathLength = 500\n\n  const nodeMap = React.useMemo(() => {\n    return new Map(nodes.map((node) => [node.id, node]))\n  }, [nodes])\n\n  const getNodeSize = React.useCallback((size?: CircuitNode[\"size\"]) => {\n    switch (size) {\n      case \"sm\": return 24\n      case \"lg\": return 48\n      default: return 36\n    }\n  }, [])\n\n  const calculatePath = React.useCallback(\n    (from: CircuitNode, to: CircuitNode): string => {\n      const fromSize = getNodeSize(from.size) / 2 + 4\n      const toSize = getNodeSize(to.size) / 2 + 4\n      const dx = to.x - from.x\n      const dy = to.y - from.y\n      let startX = from.x, startY = from.y, endX = to.x, endY = to.y\n\n      if (Math.abs(dx) > Math.abs(dy)) {\n        startX = from.x + (dx > 0 ? fromSize : -fromSize)\n        endX = to.x + (dx > 0 ? -toSize : toSize)\n        const midX = from.x + dx / 2\n        return `M ${startX} ${startY} H ${midX} V ${endY} H ${endX}`\n      } else {\n        startY = from.y + (dy > 0 ? fromSize : -fromSize)\n        endY = to.y + (dy > 0 ? -toSize : toSize)\n        const midY = from.y + dy / 2\n        return `M ${startX} ${startY} V ${midY} H ${endX} V ${endY}`\n      }\n    },\n    [getNodeSize]\n  )\n\n  return (\n    <div\n      className={cn(\"relative overflow-hidden rounded-xl bg-neutral-950/50 border border-neutral-800/50\", className)}\n      style={{ width, height }}\n      {...props}\n    >\n      <svg width={width} height={height} className=\"absolute inset-0\" style={{ overflow: \"visible\" }}>\n        <defs>\n          <filter id=\"circuitGlow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\n            <feGaussianBlur stdDeviation=\"3\" result=\"coloredBlur\" />\n            <feMerge>\n              <feMergeNode in=\"coloredBlur\" />\n              <feMergeNode in=\"SourceGraphic\" />\n            </feMerge>\n          </filter>\n          {showGrid && (\n            <pattern id=\"circuitGrid\" width={gridSize} height={gridSize} patternUnits=\"userSpaceOnUse\">\n              <circle cx={gridSize / 2} cy={gridSize / 2} r=\"0.5\" fill={gridColor} />\n            </pattern>\n          )}\n        </defs>\n        {showGrid && <rect width={width} height={height} fill=\"url(#circuitGrid)\" />}\n        {connections.map((conn, i) => {\n          const fromNode = nodeMap.get(conn.from)\n          const toNode = nodeMap.get(conn.to)\n          if (!fromNode || !toNode) return null\n          const d = calculatePath(fromNode, toNode)\n          return (\n            <g key={`connection-${i}`}>\n              <path d={d} fill=\"none\" stroke={traceColor} strokeWidth={traceWidth} strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n              {conn.animated !== false && (\n                <motion.path\n                  d={d}\n                  fill=\"none\"\n                  stroke={pulseColor}\n                  strokeWidth={traceWidth + 2}\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  filter=\"url(#circuitGlow)\"\n                  strokeDasharray={`${pathLength * 0.1} ${pathLength * 0.9}`}\n                  animate={{ strokeDashoffset: [pathLength, -pathLength] }}\n                  transition={{ duration: pulseSpeed, repeat: Infinity, ease: \"linear\", delay: i * 0.3 }}\n                />\n              )}\n              {conn.bidirectional && (\n                <motion.path\n                  d={d}\n                  fill=\"none\"\n                  stroke={pulseColor}\n                  strokeWidth={traceWidth + 2}\n                  strokeLinecap=\"round\"\n                  strokeLinejoin=\"round\"\n                  filter=\"url(#circuitGlow)\"\n                  strokeDasharray={`${pathLength * 0.1} ${pathLength * 0.9}`}\n                  animate={{ strokeDashoffset: [-pathLength, pathLength] }}\n                  transition={{ duration: pulseSpeed, repeat: Infinity, ease: \"linear\", delay: i * 0.3 + pulseSpeed / 2 }}\n                />\n              )}\n            </g>\n          )\n        })}\n      </svg>\n      {nodes.map((node, i) => {\n        const size = getNodeSize(node.size)\n        return (\n          <motion.div\n            key={node.id}\n            className=\"absolute flex items-center justify-center\"\n            style={{ left: node.x - size / 2, top: node.y - size / 2, width: size, height: size }}\n            initial={{ scale: 0, opacity: 0 }}\n            animate={{ scale: 1, opacity: 1 }}\n            transition={{ delay: i * 0.1 + 0.5, type: \"spring\" }}\n          >\n            <div className=\"absolute inset-0 rounded-lg\" style={{ backgroundColor: nodeColor, opacity: 0.2 }} />\n            <div className=\"absolute inset-0 rounded-lg border\" style={{ borderColor: nodeColor }} />\n            <div className=\"relative z-10 flex items-center justify-center\" style={{ color: nodeColor }}>\n              {node.icon}\n            </div>\n            {node.label && (\n              <div className=\"absolute -bottom-6 left-1/2 -translate-x-1/2 whitespace-nowrap text-xs font-medium\" style={{ color: nodeColor }}>\n                {node.label}\n              </div>\n            )}\n          </motion.div>\n        )\n      })}\n    </div>\n  )\n}\n\nexport { CircuitBoard, type CircuitNode, type CircuitConnection, type CircuitBoardProps }\n",
      "type": "registry:ui"
    }
  ]
}
